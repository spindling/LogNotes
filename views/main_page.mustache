<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <title>LogNotes notetaking application</title>
  </head>
  <body>
    
    <h1><a href="/">LogNotes</a></h1>

    <h2>New Note </h2>
    <p><a href="/addnoteform">Create a new note</a><p>
    {{#addNote}}
    <form action="/addnote" method="post" enctype="multipart/form-data">
        <label for="title">Title</label>
        <input type="text" name="title" id="newtitle"/><br>

        <label for="content">Content</label>
        <input type="text" name="content" id="newcontent"/><br>
        
        <label for="starred">Starred</label>
        <input type="checkbox" name="starred" id="newstarred" /><br>
        
        <label for="image">Image</label>
        <input type="file" accept="image/* "name="image" id="newimage"/><br>

        <input type="submit"/>
    </form>
    {{/addNote}}
    
    {{#errorbox}}
    <h3>ERRORS: </h3>
    <ul>
    {{#errors}}

    <li>{{message}}</li>
    
    {{/errors}}
    </ul>
    {{/errorbox}}
    
    {{#editNote}}

    <h2>Edit Note</h2>
    <form action="/editnote/{{formdata.rowid}}" method="post">
        <label for="title">Title</label>
        <input type="text" name="title" value="{{formdata.title}}" /><br>

        <label for="content">Content</label>
        <input type="text" name="content" value="{{formdata.content}}"/><br>
        
        <label for="starred">Starred</label>
        <input type="checkbox" name="starred" value="{{formdata.starred}}"/><br>
        

        <input type="submit"/>
    </form>
    {{/editNote}}

    {{#replaceImage}}
    <h2>Replace Image</h2>
    <form action="/replaceimage/{{formdata.rowid}}" method="post" enctype="multipart/form-data">
        <label for="image">Image</label>
        <input type="file" accept="image/* "name="image" value="{{formdata.image}}"/><br>
        <input type="submit"/>

    </form>
    {{/replaceImage}}
    
    
    <h2>Existing Notes</h2>
    <h3>Sort Notes</h3>
    

    <h4>Sort</h4>
    <form action="/sort" method="get">
      <h5>Sort order: </h5>
      <label for="order">Ascending</label>
      <input type="radio" id="sortascend" name="order" value="ASC" {{#sortascend}}checked{{/sortascend}}>
      <label for="order">Descending</label>
      <input type="radio" id="sortdescend" name="order" value="DESC" {{#sortdescend}}checked{{/sortdescend}}><br><br>
      <h5>Sort by:</h5>
      <input type="radio" id="titlesort" name="sortby" value="title" {{#sorttitle}}checked{{/sorttitle}}>
      <label for="titlesort">Title</label><br>
      <input type="radio" id="datesort" name="sortby" value="timestamp" {{#sortdate}}checked{{/sortdate}}>
      <label for="datesort">Date Created</label><br>
      <input type="radio" id="charcountsort" name="sortby" value="charcount" {{#sortcharcount}}checked{{/sortcharcount}}>
      <label for="charcountsort">Character Count</label><br>
      <input type="submit"/>
    </form>

    <h4>Filter: </h4>
    <form action="/filter" method="get">
      <label for="filter">Starred</label>
      <input type="checkbox" id="filterstarred" name="starred" onChange="this.form.submit()" {{#checked}}checked{{/checked}}><br>
      <!--<input type="submit"/>-->
    </form>

    <p><a href="/resetdatabase">Delete all notes</a></p>
    <table>
        <tr>
            <th>Row ID</th>
            <th>Title</th>
            <th>Content</th>
            <th>Starred</th>
            <th>Image</th>
            <th>Timestamp</th>
            <th>Character Count</th>
            <th>Delete</th>
            <th>Edit Content</th>
            <th>Replace Image</th>
            <th>Delete Image</th>

        </tr>

        {{#notes}}
        <tr>
            <th>{{ rowid }}</th>
            <td>{{ title }}</td>
            <td>{{ content }}</td>
            <td>{{ starred }}</td>
            <td><img src="/image/{{rowid}}"></td>
            <td>{{ timestamp }}</td>
            <td>{{ charcount }}</td>
            <td><a href="/deletenote/{{rowid}}">Delete
            <td><a href="/editnoteform/{{rowid}}">Edit  
            <td><a href="/replaceimageform/{{rowid}}">Replace Image
            <td><a href="/deleteimage/{{rowid}}">Delete Image
         </tr>
         {{/notes}}

    </table>
  </body>
</html>